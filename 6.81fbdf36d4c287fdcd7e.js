(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{B0kD:function(t,e,n){"use strict";n.r(e),n.d(e,"PlanetModule",(function(){return y}));var r=n("ofXK"),i=n("tyNb"),a=n("fXoL"),s=n("2Vo4"),c=n("LRne"),l=n("AytR"),o=n("vkgz"),b=n("JIr8"),p=n("tk/3");let g=(()=>{class t{constructor(t){this.http=t,this.errorMessage=new s.a("")}getAll(){return this.http.get(l.a.apiUrl+"planets").pipe(Object(o.a)(t=>console.log("fetched planets")),Object(b.a)(this.handleError("getAll",{results:[]})))}get(t){return this.http.get(`${l.a.apiUrl}planets/${t}`).pipe(Object(o.a)(t=>console.log("fetched planet")),Object(b.a)(this.handleError("get with id:"+t,null)))}handleError(t="operation",e){return n=>(console.error(`${t} failed: ${n.message}`),Object(c.a)(e))}}return t.\u0275fac=function(e){return new(e||t)(a.Ob(p.a))},t.\u0275prov=a.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=n("yRMz");const h=function(t){return["/planets",t]};function f(t,e){if(1&t&&(a.Kb(0,"div",3),a.Kb(1,"p"),a.ec(2),a.Kb(3,"a",4),a.ec(4,"More Details"),a.Jb(),a.Jb(),a.Jb()),2&t){const t=e.$implicit;a.xb(2),a.gc("",t.name,"/",t.climate,"/",t.gravity," "),a.xb(1),a.Ub("routerLink",a.Wb(4,h,t.id))}}function d(t,e){1&t&&(a.Kb(0,"p"),a.ec(1,"No existen planetas para este criterio de b\xfasqueda"),a.Jb())}let m=(()=>{class t{constructor(t,e){this.Planetervice=t,this.filterService=e,this.planets=[],this.isEmpty=!1,this.sucription=this.filterService.filterSubject.subscribe(t=>{this.planets.length>0&&this.filter(t)})}ngOnInit(){this.getAll()}getAll(){this.Planetervice.getAll().subscribe(t=>{const e=t.results;for(const r of e)r.id=this.getId(r.url),this.planets.push(r);localStorage.setItem("items",JSON.stringify(this.planets));const n=this.filterService.getFiltertext();""!==n&&this.filter(n)})}getId(t){return t.split("/")[5]}filter(t){let e=localStorage.getItem("items");if(e=JSON.parse(e),t=""!==t?t.toLocaleLowerCase():"",this.planets=e.filter(e=>e.name.toLocaleLowerCase().indexOf(t)>-1||e.climate.toLocaleLowerCase().indexOf(t)>-1||e.gravity.toLocaleLowerCase().indexOf(t)>-1),this.isEmpty=0===this.planets.length,this.planets.length>0&&""!==t){let e=localStorage.getItem("search"),n=null!==e?JSON.parse(e):[];const r={text:t,route:"planets"};0===n.filter(t=>t.text===r.text&&t.route===r.route).length&&(n.push(r),localStorage.setItem("search",JSON.stringify(n)),this.filterService.reloadSearch())}}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(g),a.Hb(u.a))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-list-planet"]],decls:3,vars:2,consts:[[1,"card"],["class","item-card",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"item-card"],[3,"routerLink"]],template:function(t,e){1&t&&(a.Kb(0,"div",0),a.cc(1,f,5,6,"div",1),a.cc(2,d,2,0,"p",2),a.Jb()),2&t&&(a.xb(1),a.Ub("ngForOf",e.planets),a.xb(1),a.Ub("ngIf",e.isEmpty))},directives:[r.h,r.i,i.c],styles:[".card[_ngcontent-%COMP%]{margin:10px}.item-card[_ngcontent-%COMP%]{padding:10px;font-weight:700}.item-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:10px;font-weight:300}"]}),t})();var v=n("8Ams");function J(t,e){if(1&t&&(a.Kb(0,"div"),a.Kb(1,"p"),a.ec(2,"Something went wrong"),a.Jb(),a.Kb(3,"p"),a.ec(4),a.Jb(),a.Jb()),2&t){const t=a.Tb();a.xb(4),a.fc("Error: ",t.errorMessage,"")}}function x(t,e){if(1&t&&(a.Kb(0,"div",4),a.Kb(1,"p"),a.Kb(2,"span"),a.ec(3,"Nombre:"),a.Jb(),a.ec(4),a.Jb(),a.Kb(5,"p"),a.Kb(6,"span"),a.ec(7,"Clima:"),a.Jb(),a.ec(8),a.Jb(),a.Kb(9,"p"),a.Kb(10,"span"),a.ec(11,"Gravedad:"),a.Jb(),a.ec(12),a.Jb(),a.Kb(13,"p"),a.Kb(14,"span"),a.ec(15,"Terreno:"),a.Jb(),a.ec(16),a.Jb(),a.Kb(17,"p"),a.Kb(18,"span"),a.ec(19,"Poblaci\xf3n:"),a.Jb(),a.ec(20),a.Jb(),a.Jb()),2&t){const t=a.Tb();a.xb(4),a.fc(" ",null==t.planet?null:t.planet.name,""),a.xb(4),a.fc(" ",null==t.planet?null:t.planet.climate,""),a.xb(4),a.fc(" ",null==t.planet?null:t.planet.gravity,""),a.xb(4),a.fc(" ",null==t.planet?null:t.planet.terrain,""),a.xb(4),a.fc(" ",null==t.planet?null:t.planet.population,"")}}const O=[{path:"",component:m},{path:":id",component:(()=>{class t{constructor(t,e,n,r){this.planetService=t,this.activatedRoute=e,this.router=n,this.toolbarService=r,this.errorMessage=""}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.get(t.id)}),this.planetService.errorMessage.subscribe(t=>{this.errorMessage=t}),this.toolbarService.show(!1)}get(t){this.planetService.get(t).subscribe(t=>{this.planet=t})}goBack(){this.router.navigate(["planets"]),this.toolbarService.show(!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Hb(g),a.Hb(i.a),a.Hb(i.b),a.Hb(v.a))},t.\u0275cmp=a.Bb({type:t,selectors:[["app-detail-planet"]],decls:6,vars:2,consts:[[4,"ngIf","ngIfElse"],["planetDetail",""],[1,"btn-back"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card"]],template:function(t,e){if(1&t&&(a.cc(0,J,5,1,"div",0),a.cc(1,x,21,5,"ng-template",null,1,a.dc),a.Kb(3,"div",2),a.Kb(4,"button",3),a.Rb("click",(function(){return e.goBack()})),a.ec(5,"Back"),a.Jb(),a.Jb()),2&t){const t=a.Yb(2);a.Ub("ngIf",e.errorMessage)("ngIfElse",t)}},directives:[r.i],styles:[".card[_ngcontent-%COMP%]{margin:10px}.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px;font-weight:700}.btn-back[_ngcontent-%COMP%]{text-align:end;margin-right:10px}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[i.d.forChild(O)],i.d]}),t})(),y=(()=>{class t{}return t.\u0275mod=a.Fb({type:t}),t.\u0275inj=a.Eb({factory:function(e){return new(e||t)},imports:[[r.b,w]]}),t})()}}]);