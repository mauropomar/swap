(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{pZTd:function(e,t,r){"use strict";r.r(t),r.d(t,"PeopleModule",(function(){return x}));var o=r("ofXK"),n=r("tyNb"),i=r("fXoL"),s=r("2Vo4"),c=r("LRne"),l=r("AytR"),p=r("vkgz"),a=r("JIr8"),b=r("tk/3");let g=(()=>{class e{constructor(e){this.http=e,this.errorMessage=new s.a("")}getAll(){return this.http.get(l.a.apiUrl+"people").pipe(Object(p.a)(e=>console.log("fetched peoples")),Object(a.a)(this.handleError("getAll",{results:[]})))}get(e){return this.http.get(`${l.a.apiUrl}people/${e}`).pipe(Object(p.a)(e=>console.log("fetched peoples")),Object(a.a)(this.handleError("get with id:"+e,null)))}handleError(e="operation",t){return r=>(console.error(`${e} failed: ${r.message}`),Object(c.a)(t))}}return e.\u0275fac=function(t){return new(t||e)(i.Ob(b.a))},e.\u0275prov=i.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var h=r("yRMz");const u=function(e){return["/peoples",e]};function f(e,t){if(1&e&&(i.Kb(0,"div",3),i.Kb(1,"p"),i.ec(2),i.Kb(3,"a",4),i.ec(4,"More Details"),i.Jb(),i.Jb(),i.Jb()),2&e){const e=t.$implicit;i.xb(2),i.gc("",e.name,"/",e.gender,"/",e.birth_year," "),i.xb(1),i.Ub("routerLink",i.Wb(4,u,e.id))}}function d(e,t){1&e&&(i.Kb(0,"p"),i.ec(1,"No existen personas para este criterio de b\xfasqueda"),i.Jb())}let m=(()=>{class e{constructor(e,t){this.peopleService=e,this.filterService=t,this.peoples=[],this.isEmpty=!1,this.sucription=this.filterService.filterSubject.subscribe(e=>{this.peoples.length>0?this.filter(e):this.isEmpty&&(this.peoples=JSON.parse(localStorage.getItem("items")),this.isEmpty=!1)})}ngOnInit(){this.getAll()}ngOnDestroy(){this.sucription.unsubscribe()}getAll(){this.peopleService.getAll().subscribe(e=>{const t=e.results;for(const o of t)o.id=this.getId(o.url),this.peoples.push(o);localStorage.setItem("items",JSON.stringify(this.peoples));const r=this.filterService.getFiltertext();""!==r&&this.filter(r)})}getId(e){return e.split("/")[5]}filter(e){let t=localStorage.getItem("items");if(t=JSON.parse(t),e=""!==e?e.toLocaleLowerCase():"",this.peoples=t.filter(t=>t.name.toLocaleLowerCase().indexOf(e)>-1||t.birth_year.toLocaleLowerCase().indexOf(e)>-1),this.isEmpty=0===this.peoples.length,this.peoples.length>0&&""!==e){let t=localStorage.getItem("search"),r=null!==t?JSON.parse(t):[];const o={text:e,route:"peoples"};0===r.filter(e=>e.text===o.text&&e.route===o.route).length&&(r.push(o),localStorage.setItem("search",JSON.stringify(r)),this.filterService.reloadSearch())}}}return e.\u0275fac=function(t){return new(t||e)(i.Hb(g),i.Hb(h.a))},e.\u0275cmp=i.Bb({type:e,selectors:[["app-list-people"]],decls:3,vars:2,consts:[[1,"card"],["class","item-card",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"item-card"],[3,"routerLink"]],template:function(e,t){1&e&&(i.Kb(0,"div",0),i.cc(1,f,5,6,"div",1),i.cc(2,d,2,0,"p",2),i.Jb()),2&e&&(i.xb(1),i.Ub("ngForOf",t.peoples),i.xb(1),i.Ub("ngIf",t.isEmpty))},directives:[o.h,o.i,n.c],styles:[".card[_ngcontent-%COMP%]{margin:10px}.item-card[_ngcontent-%COMP%]{padding:10px;font-weight:700}.item-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:10px;font-weight:300}"]}),e})();var v=r("8Ams");function J(e,t){if(1&e&&(i.Kb(0,"div"),i.Kb(1,"p"),i.ec(2,"Something went wrong"),i.Jb(),i.Kb(3,"p"),i.ec(4),i.Jb(),i.Jb()),2&e){const e=i.Tb();i.xb(4),i.fc("Error: ",e.errorMessage,"")}}function y(e,t){if(1&e&&(i.Kb(0,"div",4),i.Kb(1,"p"),i.Kb(2,"span"),i.ec(3,"Nombre:"),i.Jb(),i.ec(4),i.Jb(),i.Kb(5,"p"),i.Kb(6,"span"),i.ec(7,"Altura:"),i.Jb(),i.ec(8),i.Jb(),i.Kb(9,"p"),i.Kb(10,"span"),i.ec(11,"Sexo:"),i.Jb(),i.ec(12),i.Jb(),i.Kb(13,"p"),i.Kb(14,"span"),i.ec(15,"A\xf1o de nacimiento:"),i.Jb(),i.ec(16),i.Jb(),i.Kb(17,"p"),i.Kb(18,"span"),i.ec(19,"Color de ojos:"),i.Jb(),i.ec(20),i.Jb(),i.Jb()),2&e){const e=i.Tb();i.xb(4),i.fc(" ",null==e.people?null:e.people.name,""),i.xb(4),i.fc(" ",null==e.people?null:e.people.height,""),i.xb(4),i.fc(" ",null==e.people?null:e.people.gender,""),i.xb(4),i.fc(" ",null==e.people?null:e.people.birth_year,""),i.xb(4),i.fc(" ",null==e.people?null:e.people.eye_color,"")}}const O=[{path:"",component:m},{path:":id",component:(()=>{class e{constructor(e,t,r,o){this.peopleService=e,this.activatedRoute=t,this.router=r,this.toolbarService=o,this.errorMessage=""}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.get(e.id)}),this.peopleService.errorMessage.subscribe(e=>{this.errorMessage=e}),this.toolbarService.show(!1)}get(e){this.peopleService.get(e).subscribe(e=>{this.people=e})}goBack(){this.router.navigate(["peoples"]),this.toolbarService.show(!0)}}return e.\u0275fac=function(t){return new(t||e)(i.Hb(g),i.Hb(n.a),i.Hb(n.b),i.Hb(v.a))},e.\u0275cmp=i.Bb({type:e,selectors:[["app-detail-people"]],decls:6,vars:2,consts:[[4,"ngIf","ngIfElse"],["peopleDetail",""],[1,"btn-back"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card"]],template:function(e,t){if(1&e&&(i.cc(0,J,5,1,"div",0),i.cc(1,y,21,5,"ng-template",null,1,i.dc),i.Kb(3,"div",2),i.Kb(4,"button",3),i.Rb("click",(function(){return t.goBack()})),i.ec(5,"Back"),i.Jb(),i.Jb()),2&e){const e=i.Yb(2);i.Ub("ngIf",t.errorMessage)("ngIfElse",e)}},directives:[o.i],styles:[".card[_ngcontent-%COMP%]{margin:10px}.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px;font-weight:700}.btn-back[_ngcontent-%COMP%]{text-align:end;margin-right:10px}"]}),e})()}];let S=(()=>{class e{}return e.\u0275mod=i.Fb({type:e}),e.\u0275inj=i.Eb({factory:function(t){return new(t||e)},imports:[[n.d.forChild(O)],n.d]}),e})(),x=(()=>{class e{}return e.\u0275mod=i.Fb({type:e}),e.\u0275inj=i.Eb({factory:function(t){return new(t||e)},imports:[[o.b,S]]}),e})()}}]);