(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{bok0:function(t,e,s){"use strict";s.r(e),s.d(e,"StarshipModule",(function(){return F}));var i=s("ofXK"),r=s("tyNb"),n=s("fXoL"),o=s("2Vo4"),a=s("LRne"),b=s("AytR"),c=s("vkgz"),p=s("JIr8"),l=s("tk/3");let h=(()=>{class t{constructor(t){this.http=t,this.errorMessage=new o.a("")}getAll(){return this.http.get(b.a.apiUrl+"starships").pipe(Object(c.a)(t=>console.log("fetched starships")),Object(p.a)(this.handleError("getAll",{results:[]})))}get(t){return this.http.get(`${b.a.apiUrl}starships/${t}`).pipe(Object(c.a)(t=>console.log("fetched starship")),Object(p.a)(this.handleError("get with id:"+t,null)))}handleError(t="operation",e){return s=>(console.error(`${t} failed: ${s.message}`),Object(a.a)(e))}}return t.\u0275fac=function(e){return new(e||t)(n.Jb(l.a))},t.\u0275prov=n.zb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var u=s("yRMz");const g=function(t){return["/starships",t]};function d(t,e){if(1&t&&(n.Gb(0,"div",3),n.Gb(1,"p"),n.Yb(2),n.Gb(3,"a",4),n.Yb(4,"More Details"),n.Fb(),n.Fb(),n.Fb()),2&t){const t=e.$implicit;n.ub(2),n.ac("",t.name,"/",t.model,"/",t.manufacturer," "),n.ub(1),n.Pb("routerLink",n.Qb(4,g,t.id))}}function f(t,e){1&t&&(n.Gb(0,"p"),n.Yb(1,"No existen naves para este criterio de b\xfasqueda"),n.Fb())}function m(t,e){if(1&t&&(n.Gb(0,"div"),n.Gb(1,"p"),n.Yb(2,"Something went wrong"),n.Fb(),n.Gb(3,"p"),n.Yb(4),n.Fb(),n.Fb()),2&t){const t=n.Ob();n.ub(4),n.Zb("Error: ",t.errorMessage,"")}}function v(t,e){if(1&t&&(n.Gb(0,"div",4),n.Gb(1,"p"),n.Gb(2,"span"),n.Yb(3,"Nombre:"),n.Fb(),n.Yb(4),n.Fb(),n.Gb(5,"p"),n.Gb(6,"span"),n.Yb(7,"Modelo:"),n.Fb(),n.Yb(8),n.Fb(),n.Gb(9,"p"),n.Gb(10,"span"),n.Yb(11,"Proveedor:"),n.Fb(),n.Yb(12),n.Fb(),n.Gb(13,"p"),n.Gb(14,"span"),n.Yb(15,"Tipo de nave:"),n.Fb(),n.Yb(16),n.Fb(),n.Gb(17,"p"),n.Gb(18,"span"),n.Yb(19,"Pasajeros:"),n.Fb(),n.Yb(20),n.Fb(),n.Fb()),2&t){const t=n.Ob();n.ub(4),n.Zb(" ",null==t.ship?null:t.ship.name,""),n.ub(4),n.Zb(" ",null==t.ship?null:t.ship.model,""),n.ub(4),n.Zb(" ",null==t.ship?null:t.ship.manufacturer,""),n.ub(4),n.Zb(" ",null==t.ship?null:t.ship.starship_class,""),n.ub(4),n.Zb(" ",null==t.ship?null:t.ship.passengers,"")}}const O=[{path:"",component:(()=>{class t{constructor(t,e){this.shipService=t,this.filterService=e,this.ships=[],this.isEmpty=!1,this.sucription=this.filterService.filterSubject.subscribe(t=>{"starships"===window.location.href.split("/")[3]&&this.filter(t)})}ngOnInit(){this.getAll()}ngOnDestroy(){this.sucription.unsubscribe()}getAll(){this.shipService.getAll().subscribe(t=>{const e=t.results;for(const s of e)s.id=this.getId(s.url),this.ships.push(s),localStorage.setItem("items",JSON.stringify(this.ships))})}getId(t){return t.split("/")[5]}filter(t){let e=localStorage.getItem("items");if(e=JSON.parse(e),t=""!==t?t.toLocaleLowerCase():"",this.ships=e.filter(e=>e.name.toLocaleLowerCase().indexOf(t)>-1||e.model.toLocaleLowerCase().indexOf(t)>-1||e.manufacturer.toLocaleLowerCase().indexOf(t)>-1||e.starship_class.toLocaleLowerCase().indexOf(t)>-1),this.isEmpty=0===this.ships.length,this.ships.length>0&&""!==t){let e=localStorage.getItem("search"),s=null!==e?JSON.parse(e):[];s.push({text:t,route:"starships"}),localStorage.setItem("search",JSON.stringify(s)),this.filterService.reloadSearch()}}}return t.\u0275fac=function(e){return new(e||t)(n.Db(h),n.Db(u.a))},t.\u0275cmp=n.xb({type:t,selectors:[["app-list-starship"]],decls:3,vars:2,consts:[[1,"card"],["class","item-card",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"item-card"],[3,"routerLink"]],template:function(t,e){1&t&&(n.Gb(0,"div",0),n.Wb(1,d,5,6,"div",1),n.Wb(2,f,2,0,"p",2),n.Fb()),2&t&&(n.ub(1),n.Pb("ngForOf",e.ships),n.ub(1),n.Pb("ngIf",e.isEmpty))},directives:[i.h,i.i,r.c],styles:[".card[_ngcontent-%COMP%]{margin:10px}.item-card[_ngcontent-%COMP%]{padding:10px;font-weight:700}.item-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:10px;font-weight:300}"]}),t})()},{path:":id",component:(()=>{class t{constructor(t,e,s){this.shipService=t,this.activatedRoute=e,this.router=s,this.errorMessage=""}ngOnInit(){this.activatedRoute.params.subscribe(t=>{this.get(t.id)}),this.shipService.errorMessage.subscribe(t=>{this.errorMessage=t})}get(t){this.shipService.get(t).subscribe(t=>{this.ship=t})}goBack(){this.router.navigate(["starships"])}}return t.\u0275fac=function(e){return new(e||t)(n.Db(h),n.Db(r.a),n.Db(r.b))},t.\u0275cmp=n.xb({type:t,selectors:[["app-detail-starship"]],decls:6,vars:2,consts:[[4,"ngIf","ngIfElse"],["starshipDetail",""],[1,"btn-back"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card"]],template:function(t,e){if(1&t&&(n.Wb(0,m,5,1,"div",0),n.Wb(1,v,21,5,"ng-template",null,1,n.Xb),n.Gb(3,"div",2),n.Gb(4,"button",3),n.Mb("click",(function(){return e.goBack()})),n.Yb(5,"Back"),n.Fb(),n.Fb()),2&t){const t=n.Sb(2);n.Pb("ngIf",e.errorMessage)("ngIfElse",t)}},directives:[i.i],styles:[".card[_ngcontent-%COMP%]{margin:10px}.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px;font-weight:700}.btn-back[_ngcontent-%COMP%]{text-align:end;margin-right:10px}"]}),t})()}];let w=(()=>{class t{}return t.\u0275mod=n.Bb({type:t}),t.\u0275inj=n.Ab({factory:function(e){return new(e||t)},imports:[[r.d.forChild(O)],r.d]}),t})(),F=(()=>{class t{}return t.\u0275mod=n.Bb({type:t}),t.\u0275inj=n.Ab({factory:function(e){return new(e||t)},imports:[[i.b,w]]}),t})()}}]);