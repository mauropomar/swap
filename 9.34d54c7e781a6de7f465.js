(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{wjG9:function(e,t,i){"use strict";i.r(t),i.d(t,"VehicleModule",(function(){return S}));var c=i("ofXK"),r=i("tyNb"),s=i("fXoL"),n=i("2Vo4"),l=i("LRne"),o=i("AytR"),a=i("vkgz"),b=i("JIr8"),h=i("tk/3");let u=(()=>{class e{constructor(e){this.http=e,this.errorMessage=new n.a("")}getAll(){return this.http.get(o.a.apiUrl+"vehicles").pipe(Object(a.a)(e=>console.log("fetched vehicles")),Object(b.a)(this.handleError("getAll",{results:[]})))}get(e){return this.http.get(`${o.a.apiUrl}vehicles/${e}`).pipe(Object(a.a)(e=>console.log("fetched vehicle")),Object(b.a)(this.handleError("get with id:"+e,null)))}handleError(e="operation",t){return i=>(console.error(`${e} failed: ${i.message}`),Object(l.a)(t))}}return e.\u0275fac=function(t){return new(t||e)(s.Ob(h.a))},e.\u0275prov=s.Db({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var p=i("yRMz");const g=function(e){return["/vehicles",e]};function f(e,t){if(1&e&&(s.Kb(0,"div",3),s.Kb(1,"p"),s.ec(2),s.Kb(3,"a",4),s.ec(4,"More Details"),s.Jb(),s.Jb(),s.Jb()),2&e){const e=t.$implicit;s.xb(2),s.gc("",e.name,"/",e.model,"/",e.manufacturer," "),s.xb(1),s.Ub("routerLink",s.Wb(4,g,e.id))}}function v(e,t){1&e&&(s.Kb(0,"p"),s.ec(1,"No existen vehiculos para este criterio de b\xfasqueda"),s.Jb())}let d=(()=>{class e{constructor(e,t){this.vehicleService=e,this.filterService=t,this.vehicles=[],this.isEmpty=!1,this.sucription=this.filterService.filterSubject.subscribe(e=>{this.vehicles.length>0?this.filter(e):this.isEmpty&&(this.vehicles=JSON.parse(localStorage.getItem("items")),this.isEmpty=!1)})}ngOnInit(){this.getAll()}ngOnDestroy(){this.sucription.unsubscribe()}getAll(){this.vehicleService.getAll().subscribe(e=>{const t=e.results;for(const c of t)c.id=this.getId(c.url),this.vehicles.push(c);localStorage.setItem("items",JSON.stringify(this.vehicles));const i=this.filterService.getFiltertext();""!==i&&this.filter(i)})}getId(e){return e.split("/")[5]}filter(e){let t=localStorage.getItem("items");if(t=JSON.parse(t),e=""!==e?e.toLocaleLowerCase():"",this.vehicles=t.filter(t=>t.name.toLocaleLowerCase().indexOf(e)>-1||t.model.toLocaleLowerCase().indexOf(e)>-1||t.manufacturer.toLocaleLowerCase().indexOf(e)>-1),this.isEmpty=0===this.vehicles.length,this.vehicles.length>0&&""!==e){let t=localStorage.getItem("search"),i=null!==t?JSON.parse(t):[];const c={text:e,route:"vehicles"};0===i.filter(e=>e.text===c.text&&e.route===c.route).length&&(i.push(c),localStorage.setItem("search",JSON.stringify(i)),this.filterService.reloadSearch())}}}return e.\u0275fac=function(t){return new(t||e)(s.Hb(u),s.Hb(p.a))},e.\u0275cmp=s.Bb({type:e,selectors:[["app-list-vehicle"]],decls:3,vars:2,consts:[[1,"card"],["class","item-card",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"item-card"],[3,"routerLink"]],template:function(e,t){1&e&&(s.Kb(0,"div",0),s.cc(1,f,5,6,"div",1),s.cc(2,v,2,0,"p",2),s.Jb()),2&e&&(s.xb(1),s.Ub("ngForOf",t.vehicles),s.xb(1),s.Ub("ngIf",t.isEmpty))},directives:[c.h,c.i,r.c],styles:[".card[_ngcontent-%COMP%]{margin:10px}.item-card[_ngcontent-%COMP%]{padding:10px;font-weight:700}.item-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-left:10px;font-weight:300}"]}),e})();var m=i("8Ams");function J(e,t){if(1&e&&(s.Kb(0,"div"),s.Kb(1,"p"),s.ec(2,"Something went wrong"),s.Jb(),s.Kb(3,"p"),s.ec(4),s.Jb(),s.Jb()),2&e){const e=s.Tb();s.xb(4),s.fc("Error: ",e.errorMessage,"")}}function O(e,t){if(1&e&&(s.Kb(0,"div",4),s.Kb(1,"p"),s.Kb(2,"span"),s.ec(3,"Nombre:"),s.Jb(),s.ec(4),s.Jb(),s.Kb(5,"p"),s.Kb(6,"span"),s.ec(7,"Modelo:"),s.Jb(),s.ec(8),s.Jb(),s.Kb(9,"p"),s.Kb(10,"span"),s.ec(11,"Proveedor:"),s.Jb(),s.ec(12),s.Jb(),s.Kb(13,"p"),s.Kb(14,"span"),s.ec(15,"Consumibles:"),s.Jb(),s.ec(16),s.Jb(),s.Kb(17,"p"),s.Kb(18,"span"),s.ec(19,"Clase de Vehiculo:"),s.Jb(),s.ec(20),s.Jb(),s.Jb()),2&e){const e=s.Tb();s.xb(4),s.fc(" ",null==e.vehicle?null:e.vehicle.name,""),s.xb(4),s.fc(" ",null==e.vehicle?null:e.vehicle.model,""),s.xb(4),s.fc(" ",null==e.vehicle?null:e.vehicle.manufacturer,""),s.xb(4),s.fc(" ",null==e.vehicle?null:e.vehicle.consumables,""),s.xb(4),s.fc(" ",null==e.vehicle?null:e.vehicle.vehicle_class,"")}}const w=[{path:"",component:d},{path:":id",component:(()=>{class e{constructor(e,t,i,c){this.vehicleService=e,this.activatedRoute=t,this.router=i,this.toolbarService=c,this.errorMessage=""}ngOnInit(){this.activatedRoute.params.subscribe(e=>{this.get(e.id)}),this.vehicleService.errorMessage.subscribe(e=>{this.errorMessage=e}),this.toolbarService.show(!1)}get(e){this.vehicleService.get(e).subscribe(e=>{this.vehicle=e})}goBack(){this.router.navigate(["vehicles"]),this.toolbarService.show(!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Hb(u),s.Hb(r.a),s.Hb(r.b),s.Hb(m.a))},e.\u0275cmp=s.Bb({type:e,selectors:[["app-detail-vehicle"]],decls:6,vars:2,consts:[[4,"ngIf","ngIfElse"],["vehicleDetail",""],[1,"btn-back"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card"]],template:function(e,t){if(1&e&&(s.cc(0,J,5,1,"div",0),s.cc(1,O,21,5,"ng-template",null,1,s.dc),s.Kb(3,"div",2),s.Kb(4,"button",3),s.Rb("click",(function(){return t.goBack()})),s.ec(5,"Back"),s.Jb(),s.Jb()),2&e){const e=s.Yb(2);s.Ub("ngIf",t.errorMessage)("ngIfElse",e)}},directives:[c.i],styles:[".card[_ngcontent-%COMP%]{margin:10px}.card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:10px;font-weight:700}.btn-back[_ngcontent-%COMP%]{text-align:end;margin-right:10px}"]}),e})()}];let x=(()=>{class e{}return e.\u0275mod=s.Fb({type:e}),e.\u0275inj=s.Eb({factory:function(t){return new(t||e)},imports:[[r.d.forChild(w)],r.d]}),e})(),S=(()=>{class e{}return e.\u0275mod=s.Fb({type:e}),e.\u0275inj=s.Eb({factory:function(t){return new(t||e)},imports:[[c.b,x]]}),e})()}}]);